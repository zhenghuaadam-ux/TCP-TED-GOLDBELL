<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GOLDBELL SERVICE REQUEST - Thank You</title>
<style>
/* Base styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #005bbb 0%, #003d82 100%);
  color: #333;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

.wrap {
  width: 100%;
  max-width: 800px;
  background-color: #fff;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  overflow: hidden;
}

/* Header styles */
header {
  background: linear-gradient(135deg, #005bbb 0%, #003d82 100%);
  color: white;
  padding: 25px 30px;
  text-align: center;
  position: relative;
}

.logo-container {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 15px;
}

.logo-svg {
  width: 60px;
  height: 60px;
  margin-right: 15px;
}

.logo-text {
  font-size: 28px;
  font-weight: 700;
  letter-spacing: 1px;
}

h1 {
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 10px;
}

.website-url {
  font-size: 16px;
  margin-bottom: 15px;
  opacity: 0.9;
}

.lang {
  position: absolute;
  top: 20px;
  right: 20px;
  text-align: right;
}

.lang label {
  display: block;
  margin-bottom: 5px;
  font-size: 14px;
}

.lang select {
  padding: 6px 12px;
  border-radius: 4px;
  border: none;
  background-color: white;
  color: #005bbb;
  font-weight: 600;
  cursor: pointer;
}

/* Card styles */
.card {
  padding: 40px 30px;
  text-align: center;
}

h2 {
  color: #005bbb;
  font-size: 28px;
  margin-bottom: 20px;
}

.thank-you-message {
  font-size: 18px;
  line-height: 1.6;
  margin-bottom: 30px;
  color: #555;
}

/* Queue number styles */
.queue-number {
  margin: 30px 0;
  padding: 20px;
  background-color: #f8f9fa;
  border-radius: 8px;
  border: 2px dashed #005bbb;
}

.queue-number h3 {
  color: #005bbb;
  margin-bottom: 15px;
  font-size: 20px;
}

.number {
  font-size: 42px;
  font-weight: 700;
  color: #005bbb;
  letter-spacing: 3px;
  padding: 10px;
  background-color: white;
  border-radius: 6px;
  display: inline-block;
  min-width: 250px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Instructions styles */
.instructions {
  text-align: left;
  max-width: 600px;
  margin: 30px auto;
  padding: 20px;
  background-color: #f8f9fa;
  border-radius: 8px;
}

.instructions h4 {
  color: #005bbb;
  margin-bottom: 15px;
  font-size: 20px;
  text-align: center;
}

.instructions ul {
  padding-left: 20px;
}

.instructions li {
  margin-bottom: 12px;
  line-height: 1.5;
  color: #555;
}

/* Button styles */
.btn {
  background: linear-gradient(to right, #005bbb, #003d82);
  color: white;
  border: none;
  padding: 14px 30px;
  font-size: 18px;
  font-weight: 600;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  text-decoration: none;
  display: inline-block;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
}

.btn:active {
  transform: translateY(0);
}

/* Countdown styles */
.countdown {
  margin: 20px 0;
  padding: 15px;
  background-color: #f0f8ff;
  border-radius: 8px;
  border: 1px solid #cce7ff;
}

.countdown-text {
  font-size: 16px;
  color: #005bbb;
  margin-bottom: 10px;
}

.countdown-timer {
  font-size: 24px;
  font-weight: 700;
  color: #003d82;
}

/* Responsive styles */
@media (max-width: 600px) {
  .logo-container {
    flex-direction: column;
  }
  
  .logo-svg {
    margin-right: 0;
    margin-bottom: 10px;
  }
  
  .lang {
    position: static;
    margin-top: 15px;
    text-align: center;
  }
  
  .number {
    font-size: 32px;
    min-width: 200px;
  }
  
  .card {
    padding: 25px 20px;
  }
}
</style>
</head>
<body id="thankYouPageBody">

  <div class="wrap">
    <header>
      <div class="logo-container">
        <!-- Goldbell Professional Logo -->
        <svg class="logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="goldGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#FFD700" />
              <stop offset="50%" stop-color="#FFC400" />
              <stop offset="100%" stop-color="#FFA500" />
            </linearGradient>
            <linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#005bbb" />
              <stop offset="100%" stop-color="#003d82" />
            </linearGradient>
          </defs>
          
          <!-- Background Shield -->
          <path d="M20,20 L80,20 L90,50 L80,80 L20,80 L10,50 Z" 
                fill="url(#blueGradient)" stroke="#fff" stroke-width="2"/>
          
          <!-- Golden Bell -->
          <path d="M35,35 Q50,25 65,35 Q65,50 60,60 L55,75 Q50,80 45,75 L40,60 Q35,50 35,35" 
                fill="url(#goldGradient)" stroke="#D4AF37" stroke-width="1.5"/>
          
          <!-- Bell Clapper -->
          <circle cx="50" cy="78" r="3" fill="#8B4513"/>
          <line x1="50" y1="81" x2="50" y2="88" stroke="#8B4513" stroke-width="2"/>
          <circle cx="50" cy="90" r="4" fill="#8B4513"/>
          
          <!-- Shine Effects -->
          <circle cx="42" cy="38" r="2" fill="#fff" opacity="0.8"/>
          <circle cx="58" cy="38" r="2" fill="#fff" opacity="0.8"/>
          
          <!-- Goldbell Text -->
          <text x="50" y="105" text-anchor="middle" fill="#005bbb" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
            GOLDBELL
          </text>
        </svg>
        <div class="logo-text">GOLDBELL</div>
      </div>
      <h1>WELCOME TO GOLDBELL</h1>
      <div class="website-url">www.goldbellservices.com.sg</div>
      <div class="lang">
        <label for="language" style="color:#fff;margin:0;font-weight:700">Language</label>
        <select id="language" aria-label="Language selector">
          <option value="en">English</option>
          <option value="ms">Bahasa Melayu</option>
          <option value="ta">தமிழ்</option>
          <option value="zh">中文</option>
        </select>
      </div>
    </header>

    <!-- Thank You Page -->
    <div class="card" aria-label="Thank You Page" role="region" tabindex="0" style="text-align: center;">
      <h2 id="thankYouTitle" data-i18n="thankYouTitle">Thank You for Your Submission!</h2>
      <div class="thank-you-message" id="thankYouMessage" data-i18n="thankYouMessage">Your service request has been successfully submitted. Please take note of your queue number.</div>
      
      <div class="queue-number">
        <h3 id="queueNumberLabel" data-i18n="queueNumberLabel">Your Queue Number:</h3>
        <div class="number" id="queueNumber">E000000</div>
      </div>
      
      <div class="instructions">
        <h4 id="thankYouInstructionsTitle" data-i18n="thankYouInstructionsTitle">Next Steps:</h4>
        <ul>
          <li id="thankYouInstruction1" data-i18n="thankYouInstruction1">Our team will review your request shortly.</li>
          <li id="thankYouInstruction2" data-i18n="thankYouInstruction2">You will receive an SMS confirmation with further details.</li>
          <li id="thankYouInstruction3" data-i18n="thankYouInstruction3">Please present your queue number upon arrival at the service center.</li>
        </ul>
      </div>
      
      <!-- Countdown Timer -->
      <div class="countdown">
        <div class="countdown-text">Automatically redirected back to homepage in:</div>
        <div class="countdown-timer" id="countdownTimer">10 seconds</div>
      </div>
      
      <div style="margin-top: 30px;">
        <a href="option.html" class="btn" id="newRequestBtn" data-i18n="newRequestBtn">Submit Another Request</a>
      </div>
    </div>
  </div>

  <script>
    // Generate random 6-digit number for queue number
    function generateRandomQueueNumber() {
      // Generate a random 6-digit number
      const randomNumber = Math.floor(100000 + Math.random() * 900000);
      return `E${randomNumber}`;
    }

    // Get customer data from URL parameters or form submission
    function getCustomerData() {
      // Try to get from URL parameters first
      const urlParams = new URLSearchParams(window.location.search);
      const customerName = urlParams.get('customerName') || 'Customer';
      const serviceType = urlParams.get('serviceType') || 'General Service';
      const vehicleNo = urlParams.get('vehicleNo') || '';
      const contactNo = urlParams.get('contactNo') || '';
      
      // If no URL parameters, try to get from localStorage (from form submission)
      if (customerName === 'Customer') {
        const formData = JSON.parse(localStorage.getItem('latestFormData') || '{}');
        return {
          customerName: formData.customerName || 'Customer',
          serviceType: formData.serviceType || 'General Service',
          vehicleNo: formData.vehicleNo || '',
          contactNo: formData.contactNo || '',
          companyName: formData.companyName || '',
          mileage: formData.mileage || '',
          vehicleModel: formData.vehicleModel || '',
          bookingType: formData.bookingType || 'Walk-in'
        };
      }
      
      return {
        customerName,
        serviceType,
        vehicleNo,
        contactNo
      };
    }

    // Save queue submission to localStorage
    function saveQueueSubmission(queueNumber, customerData) {
      try {
        // Get existing queue data or initialize
        const existingData = localStorage.getItem('goldbellQueue');
        let queueData = existingData ? JSON.parse(existingData) : {
          total: 0,
          current: 0,
          submissions: []
        };
        
        // Create new submission with actual customer data
        const newSubmission = {
          queueNumber: queueNumber,
          customerName: customerData.customerName,
          serviceType: customerData.serviceType,
          vehicleNo: customerData.vehicleNo,
          contactNo: customerData.contactNo,
          companyName: customerData.companyName || '',
          mileage: customerData.mileage || '',
          vehicleModel: customerData.vehicleModel || '',
          bookingType: customerData.bookingType || 'Walk-in',
          status: "waiting",
          timestamp: new Date().toISOString()
        };
        
        console.log('Saving submission:', newSubmission);
        
        // Add to submissions
        queueData.submissions.push(newSubmission);
        queueData.total = queueData.submissions.length;
        
        // Save back to localStorage
        localStorage.setItem('goldbellQueue', JSON.stringify(queueData));
        
        console.log('Queue submission saved:', newSubmission);
        console.log('Current queue data:', queueData);
        
      } catch (error) {
        console.error('Error saving queue submission:', error);
      }
    }

    // Start countdown timer for auto-redirect
    function startCountdownTimer() {
      let countdown = 10; // Changed from 30 to 10 seconds
      const countdownElement = document.getElementById('countdownTimer');
      const newRequestBtn = document.getElementById('newRequestBtn');
      
      // Update countdown every second
      const countdownInterval = setInterval(() => {
        countdown--;
        
        // Update the countdown display
        countdownElement.textContent = `${countdown} second${countdown !== 1 ? 's' : ''}`;
        
        // When countdown reaches 0, redirect automatically
        if (countdown <= 0) {
          clearInterval(countdownInterval);
          console.log('Auto-redirecting to option.html');
          window.location.href = newRequestBtn.href;
        }
      }, 1000);
    }

    // Update the queue number when the page loads
    document.addEventListener('DOMContentLoaded', function() {
      const queueNumberElement = document.getElementById('queueNumber');
      const queueNumber = generateRandomQueueNumber();
      queueNumberElement.textContent = queueNumber;
      
      // Get customer data and save the queue submission
      const customerData = getCustomerData();
      saveQueueSubmission(queueNumber, customerData);
      
      // Start the countdown timer for auto-redirect
      startCountdownTimer();
      
      console.log('Customer data:', customerData);
      console.log('Queue number generated:', queueNumber);
    });
  </script>
</body>
</html>