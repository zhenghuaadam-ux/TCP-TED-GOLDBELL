<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GOLDBELL SERVICE REQUEST - BOOKED</title>
<style>
/* All CSS remains the same as before with additions for warning lights */
/* Base styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #005bbb 0%, #003d82 100%);
  color: rgb(74, 74, 220);
  line-height: 1.6;
  padding: 20px;
  min-height: 100vh;
}

.wrap {
  max-width: 800px;
  margin: 0 auto;
  position: relative;
}

/* Header styles */
header {
  background: rgba(255, 255, 255, 0.1);
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 20px;
  text-align: center;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  position: relative;
}

.logo-container {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 15px;
}

.logo-svg {
  width: 60px;
  height: 60px;
  margin-right: 15px;
}

.logo-text {
  font-size: 28px;
  font-weight: bold;
  color: #FFD700;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

h1 {
  color: #fff;
  margin-bottom: 10px;
  font-size: 24px;
}

.website-url {
  color: #FFD700;
  font-weight: bold;
  margin-bottom: 15px;
}

.lang {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.lang label {
  color: #fff;
  font-weight: 700;
  margin: 0;
}

.lang select {
  padding: 5px 10px;
  border-radius: 5px;
  border: 1px solid #ccc;
  background: white;
}

.back-btn {
  position: absolute;
  top: 20px;
  right: 20px;
  background: rgba(255, 255, 255, 0.2);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.3);
  padding: 8px 15px;
  border-radius: 5px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s;
  text-decoration: none;
  display: inline-block;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Card styles */
.card {
  background: white;
  border-radius: 10px;
  padding: 25px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

/* Form styles */
.grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.full {
  grid-column: 1 / -1;
}

label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  color: #003d82;
}

input, select {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 5px;
  font-size: 16px;
  transition: border-color 0.3s;
}

input:focus, select:focus {
  outline: none;
  border-color: #005bbb;
  box-shadow: 0 0 0 2px rgba(0, 91, 187, 0.2);
}

.muted {
  font-size: 14px;
  color: #666;
  margin-top: 5px;
}

.error-text {
  color: #e74c3c;
  font-size: 14px;
  margin-top: 5px;
  display: none;
}

/* Vehicle model section */
.vehicle-model-section {
  margin: 15px 0;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 5px;
  border-left: 4px solid #005bbb;
}

.vehicle-model-section h4 {
  margin-bottom: 10px;
  color: #003d82;
}

.vehicle-model-options {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 15px;
}

.vehicle-model-options label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: normal;
  cursor: pointer;
}

.vehicle-model-options input[type="radio"] {
  width: auto;
}

.other-model-input {
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px dashed #ccc;
  display: none;
}

.other-model-input input {
  margin-top: 8px;
}

/* Repair type section */
.repair-type-section {
  margin: 15px 0;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 5px;
  border-left: 4px solid #28a745;
  display: none;
}

.repair-type-section h4 {
  margin-bottom: 10px;
  color: #003d82;
}

.repair-type-options {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 15px;
}

.repair-type-options label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: normal;
  cursor: pointer;
}

.repair-type-options input[type="radio"] {
  width: auto;
}

/* Warning light images section */
.warning-light-section {
  margin: 15px 0;
  padding: 15px;
  background: #fff3cd;
  border-radius: 5px;
  border-left: 4px solid #ffc107;
  display: none;
}

.warning-light-section h4 {
  margin-bottom: 10px;
  color: #856404;
}

.warning-light-images {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 15px;
  margin: 15px 0;
}

.warning-light-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: white;
  border-radius: 8px;
  border: 2px solid #dee2e6;
  transition: all 0.3s;
  cursor: pointer;
}

.warning-light-item:hover {
  border-color: #005bbb;
  transform: translateY(-2px);
}

.warning-light-item.selected {
  border-color: #28a745;
  background: #f8fff9;
  box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
}

.warning-light-checkbox {
  width: 20px;
  height: 20px;
}

.warning-light-image {
  width: 50px;
  height: 50px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}

.warning-light-symbol {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: white;
  font-size: 12px;
  text-align: center;
  line-height: 1.2;
}

.warning-light-label {
  font-size: 13px;
  font-weight: 600;
  color: #333;
  flex: 1;
}

/* Service examples */
.service-examples {
  margin: 15px 0;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 5px;
  border-left: 4px solid #FFD700;
}

.service-examples h4 {
  margin-bottom: 10px;
  color: #003d82;
}

.service-examples ul {
  padding-left: 20px;
}

.service-examples li {
  margin-bottom: 5px;
}

/* Booking field styles */
.booking-field {
  margin: 15px 0;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 5px;
  border-left: 4px solid #005bbb;
}

.booking-field h4 {
  margin-bottom: 10px;
  color: #003d82;
}

/* Button styles */
.btn {
  padding: 12px 25px;
  border: none;
  border-radius: 5px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  text-decoration: none;
  display: inline-block;
}

.btn-primary {
  background: #005bbb;
  color: white;
}

.btn-primary:hover {
  background: #003d82;
}

.btn-secondary {
  background: #e0e0e0;
  color: #333;
}

.btn-secondary:hover {
  background: #d0d0d0;
}

/* Message styles */
.message {
  padding: 12px;
  border-radius: 5px;
  margin-top: 15px;
  display: none;
}

.message.success {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.message.error {
  background: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

/* Responsive styles */
@media (max-width: 768px) {
  .grid {
    grid-template-columns: 1fr;
  }
  
  .vehicle-model-options {
    flex-direction: column;
    gap: 10px;
  }
  
  .repair-type-options {
    flex-direction: column;
    gap: 10px;
  }
  
  .warning-light-images {
    grid-template-columns: 1fr;
  }
  
  .btn {
    width: 100%;
    margin-bottom: 10px;
  }
  
  .back-btn {
    position: relative;
    top: auto;
    right: auto;
    margin-top: 10px;
  }
}

/* Specific warning light styles */
.engsys-light { background: #ff4444; }
.engsys-amber-light { background: #ffaa00; }
.dpf-light { background: #ffaa00; }
.overheat-light { background: #ff4444; }
.battery-light { background: #ff4444; }
.abs-light { background: #ffaa00; }
.adblue-light { background: #ffaa00; }
.retarder-light { background: #ffaa00; }
.issue-light { background: #6c757d; } /* Gray for general issues */
</style>
</head>
<body id="mainPage">

  <div class="wrap">
    <header>
      <div class="logo-container">
        <!-- Goldbell Professional Logo -->
        <svg class="logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="goldGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#FFD700" />
              <stop offset="50%" stop-color="#FFC400" />
              <stop offset="100%" stop-color="#FFA500" />
            </linearGradient>
            <linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#005bbb" />
              <stop offset="100%" stop-color="#003d82" />
            </linearGradient>
          </defs>
          
          <!-- Background Shield -->
          <path d="M20,20 L80,20 L90,50 L80,80 L20,80 L10,50 Z" 
                fill="url(#blueGradient)" stroke="#fff" stroke-width="2"/>
          
          <!-- Golden Bell -->
          <path d="M35,35 Q50,25 65,35 Q65,50 60,60 L55,75 Q50,80 45,75 L40,60 Q35,50 35,35" 
                fill="url(#goldGradient)" stroke="#D4AF37" stroke-width="1.5"/>
          
          <!-- Bell Clapper -->
          <circle cx="50" cy="78" r="3" fill="#8B4513"/>
          <line x1="50" y1="81" x2="50" y2="88" stroke="#8B4513" stroke-width="2"/>
          <circle cx="50" cy="90" r="4" fill="#8B4513"/>
          
          <!-- Shine Effects -->
          <circle cx="42" cy="38" r="2" fill="#fff" opacity="0.8"/>
          <circle cx="58" cy="38" r="2" fill="#fff" opacity="0.8"/>
          
          <!-- Goldbell Text -->
          <text x="50" y="105" text-anchor="middle" fill="#005bbb" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
            GOLDBELL
          </text>
        </svg>
        <div class="logo-text">GOLDBELL</div>
      </div>
      <h1>WELCOME TO GOLDBELL</h1>
      <div class="website-url">www.goldbellservices.com.sg</div>
      <div class="lang">
        <label for="language" style="color:#fff;margin:0;font-weight:700">Language</label>
        <select id="language" aria-label="Language selector">
          <option value="en">English</option>
          <option value="ms">Bahasa Melayu</option>
          <option value="ta">தமிழ்</option>
          <option value="zh">中文</option>
        </select>
      </div>
      <a href="option.html" class="back-btn" id="backBtn">Back</a>
    </header>

    <!-- Main Form Card -->
    <div class="card" role="main" id="mainFormCard">
      <form id="jobForm" autocomplete="off" novalidate>
        <div class="grid">
          <!-- Booking Field -->
          <div class="booking-field full">
            <h4>Booked</h4>
            <div class="muted">This service request is confirmed as booked.</div>
            <input type="hidden" id="bookingType" value="Booked">
          </div>
          
          <!-- Customer Name Field for Booked -->
          <div>
            <label id="customerNameLabel" data-i18n="customerName">Customer Name</label>
            <input id="customerName" type="text" placeholder="e.g. Tan Ah Kow" required />
          </div>
          
          <!-- Company Name Field for Booked -->
          <div>
            <label id="companyNameLabel" data-i18n="companyName">Company Name</label>
            <input id="companyName" type="text" placeholder="e.g. Goldbell Group" required />
          </div>

          <div class="full">
            <label id="serviceTypeLabel" data-i18n="serviceType">Service Type</label>
            <select id="serviceType" required>
              <option value="" data-i18n="selectOption">-- Select --</option>
              <option value="Repair / Service" data-i18n="repairService">Repair / Service</option>
              <option value="Speed Limiter Installation" data-i18n="speedLimiter">Speed Limiter Installation</option>
              <option value="Other Services" data-i18n="otherServices">Other Services</option>
            </select>
            <div class="muted" id="serviceHelp" data-i18n="serviceHelp">Select the type of service required.</div>
            
            <!-- Repair Type Selection (for Repair / Service) -->
            <div class="repair-type-section" id="repairTypeSection">
              <h4 id="repairTypeTitle">Please select repair type:</h4>
              <div class="repair-type-options">
                <label>
                  <input type="radio" name="repairType" value="Repair" />
                  <span>Repair</span>
                </label>
                <label>
                  <input type="radio" name="repairType" value="Servicing" />
                  <span>Servicing</span>
                </label>
                <label>
                  <input type="radio" name="repairType" value="Repair & Servicing" checked />
                  <span>Repair & Servicing</span>
                </label>
              </div>
            </div>
            
            <!-- Warning Light Images (for Engine light on) -->
            <div class="warning-light-section" id="warningLightSection">
              <h4>Select which warning lights and issues you're experiencing:</h4>
              <div class="warning-light-images" id="warningLightContainer">
                <!-- Warning lights will be generated by JavaScript -->
              </div>
            </div>
            
            <!-- Vehicle Model Selection (for Speed Limiter Installation) -->
            <div class="vehicle-model-section" id="vehicleModelSection">
              <h4 id="vehicleModelTitle">Please select vehicle model:</h4>
              <div class="vehicle-model-options">
                <label>
                  <input type="radio" name="vehicleModel" value="HINO" />
                  <span>HINO</span>
                </label>
                <label>
                  <input type="radio" name="vehicleModel" value="NISSAN" />
                  <span>NISSAN</span>
                </label>
                <label>
                  <input type="radio" name="vehicleModel" value="TOYOTA" />
                  <span>TOYOTA</span>
                </label>
                <label>
                  <input type="radio" name="vehicleModel" value="FUSO" checked />
                  <span>FUSO</span>
                </label>
                <label>
                  <input type="radio" name="vehicleModel" value="OTHERS" />
                  <span>OTHERS</span>
                </label>
              </div>
              
              <!-- Other Vehicle Model Input -->
              <div class="other-model-input" id="otherModelInput">
                <label for="otherVehicleModel">Please specify vehicle model:</label>
                <input type="text" id="otherVehicleModel" placeholder="Enter vehicle model (e.g., ISUZU, MITSUBISHI, etc.)" />
              </div>
            </div>
            
            <!-- Service Examples (for Other Services) -->
            <div class="service-examples" id="serviceExamples">
              <h4 id="examplesTitle">Service Examples:</h4>
              <ul id="examplesList">
                <li id="defaultExample">Select a service type to see examples</li>
              </ul>
            </div>
          </div>

          <div>
            <label id="vehicleNoLabel" data-i18n="vehicleNo">Vehicle No.</label>
            <input id="vehicleNo" type="text" maxlength="8" placeholder="e.g. SB1234A" required aria-describedby="vehicleHelp" />
            <div id="vehicleHelp" class="muted" data-i18n="vehicleHelp">Format: Minimum 2 letters, 1 digit, 1 letter (e.g., SB1234A, ABC1D).</div>
            <div id="vehicleError" class="error-text" data-i18n="vehicleError">Invalid format — use Singapore vehicle format like SB1234A or ABC1D.</div>
          </div>

          <div>
            <label id="mileageLabel" data-i18n="mileage">Mileage (km)</label>
            <input id="mileage" type="text" inputmode="numeric" placeholder="e.g. 123456" maxlength="7" required aria-describedby="mileageHelp" />
            <div id="mileageHelp" class="muted" data-i18n="mileageHelp">Numbers only — maximum 7 digits.</div>
            <div id="mileageError" class="error-text" data-i18n="mileageError">Only digits allowed, max 7 digits.</div>
          </div>

          <div>
            <label id="contactNoLabel" data-i18n="contactNo">Contact No.</label>
            <input id="contactNo" type="text" placeholder="e.g. 91234567" maxlength="8" required aria-describedby="contactHelp" />
            <div id="contactHelp" class="muted" data-i18n="contactHelp">8 digits only — must start with 8, 9, or 6.</div>
            <div id="contactError" class="error-text" data-i18n="contactError">Must be 8-digit Singapore number starting with 8, 9, or 6.</div>
          </div>

        </div>

        <div style="margin-top:14px;display:flex;gap:10px;align-items:center;">
          <button type="submit" id="submitBtn" class="btn btn-primary">Submit</button>
          <button type="reset" id="resetBtn" class="btn btn-secondary">Reset</button>
        </div>

        <div id="formMessage" class="message" aria-live="polite"></div>
      </form>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Form elements
      const form = document.getElementById('jobForm');
      const serviceType = document.getElementById('serviceType');
      const vehicleModelSection = document.getElementById('vehicleModelSection');
      const repairTypeSection = document.getElementById('repairTypeSection');
      const warningLightSection = document.getElementById('warningLightSection');
      const warningLightContainer = document.getElementById('warningLightContainer');
      const serviceExamples = document.getElementById('serviceExamples');
      const examplesList = document.getElementById('examplesList');
      const defaultExample = document.getElementById('defaultExample');
      const mileageInput = document.getElementById('mileage');
      const contactInput = document.getElementById('contactNo');
      const customerNameInput = document.getElementById('customerName');
      const companyNameInput = document.getElementById('companyName');
      const otherModelInput = document.getElementById('otherModelInput');
      const otherVehicleModel = document.getElementById('otherVehicleModel');
      const vehicleModelRadios = document.querySelectorAll('input[name="vehicleModel"]');
      const repairTypeRadios = document.querySelectorAll('input[name="repairType"]');
      const vehicleNoInput = document.getElementById('vehicleNo');
      const bookingTypeInput = document.getElementById('bookingType');
      
      // Fuso Truck Dashboard Warning Lights - Based on your screenshots
      const warningLights = [
        { 
          id: 'engsys', 
          name: 'Engine System', 
          color: 'red',
          symbol: 'ENGSYS',
          class: 'engsys-light'
        },
        { 
          id: 'engsys2', 
          name: 'Engine System', 
          color: 'amber',
          symbol: 'ENGSYS',
          class: 'engsys-amber-light'
        },
        { 
          id: 'dpf', 
          name: 'DPF Warning', 
          color: 'amber',
          symbol: 'DPF',
          class: 'dpf-light'
        },
        { 
          id: 'overheat', 
          name: 'Overheat', 
          color: 'red',
          symbol: 'TEMP',
          class: 'overheat-light'
        },
        { 
          id: 'battery', 
          name: 'Battery Charge', 
          color: 'red',
          symbol: 'BATT',
          class: 'battery-light'
        },
        { 
          id: 'abs', 
          name: 'ABS Warning', 
          color: 'amber',
          symbol: 'ABS',
          class: 'abs-light'
        },
        { 
          id: 'adBlue', 
          name: 'AdBlue System', 
          color: 'amber',
          symbol: 'ADBLUE',
          class: 'adblue-light'
        },
        { 
          id: 'retarder', 
          name: 'Retarder System', 
          color: 'amber',
          symbol: 'RET',
          class: 'retarder-light'
        },
        // Added the requested issues as warning light items
        { 
          id: 'brakeIssue', 
          name: 'Brake Issue', 
          color: 'gray',
          symbol: 'BRAKE',
          class: 'issue-light'
        },
        { 
          id: 'acNotCold', 
          name: 'A/C Not Cold', 
          color: 'gray',
          symbol: 'A/C',
          class: 'issue-light'
        },
        { 
          id: 'vehicleSound', 
          name: 'Vehicle Got Sound', 
          color: 'gray',
          symbol: 'SOUND',
          class: 'issue-light'
        },
        { 
          id: 'burningSmell', 
          name: 'Burning Smell', 
          color: 'gray',
          symbol: 'SMELL',
          class: 'issue-light'
        }
      ];
      
      // Initialize warning lights
      initializeWarningLights();
      
      // Initially hide sections
      vehicleModelSection.style.display = 'none';
      repairTypeSection.style.display = 'none';
      warningLightSection.style.display = 'none';
      serviceExamples.style.display = 'none';
      
      // Service type examples (only for Other Services now)
      const serviceExamplesData = {
        'Speed Limiter Installation': [
          'Speed limiter device installation',
          'Calibration and testing',
          'Compliance certification',
          'Regular maintenance check'
        ],
        'Other Services': [
          'Vehicle inspection',
          'Road tax renewal assistance',
          'Insurance claims assistance',
          'Vehicle customization'
        ]
      };
      
      // Service type change handler
      serviceType.addEventListener('change', function() {
        const selectedService = this.value;
        
        // Reset all sections first
        resetAllSections();
        
        // Show/hide sections based on service type
        if (selectedService === 'Speed Limiter Installation') {
          vehicleModelSection.style.display = 'block';
          serviceExamples.style.display = 'block';
          updateServiceExamples(selectedService);
        } else if (selectedService === 'Repair / Service') {
          repairTypeSection.style.display = 'block';
          warningLightSection.style.display = 'block'; // Always show warning lights for repair/service
        } else if (selectedService === 'Other Services') {
          serviceExamples.style.display = 'block';
          updateServiceExamples(selectedService);
        }
      });
      
      // Repair type change handler
      repairTypeRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          // Always show warning lights for any repair type
          warningLightSection.style.display = 'block';
        });
      });
      
      // Vehicle model radio button change handler
      vehicleModelRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (this.value === 'OTHERS') {
            otherModelInput.style.display = 'block';
            otherVehicleModel.required = true;
          } else {
            otherModelInput.style.display = 'none';
            otherVehicleModel.required = false;
            otherVehicleModel.value = '';
          }
        });
      });
      
      // Mileage input validation - only allow numbers
      mileageInput.addEventListener('input', function() {
        this.value = this.value.replace(/[^0-9]/g, '');
      });
      
      // Contact number input validation - only allow numbers and check first digit
      contactInput.addEventListener('input', function() {
        this.value = this.value.replace(/[^0-9]/g, '');
        
        // If first digit is entered and not 6, 8, or 9, show error
        if (this.value.length > 0 && !['6', '8', '9'].includes(this.value[0])) {
          document.getElementById('contactError').style.display = 'block';
        } else {
          document.getElementById('contactError').style.display = 'none';
        }
      });
      
      // Function to initialize warning lights
      function initializeWarningLights() {
        warningLightContainer.innerHTML = '';
        
        warningLights.forEach(light => {
          const lightItem = document.createElement('div');
          lightItem.className = 'warning-light-item';
          lightItem.innerHTML = `
            <input type="checkbox" class="warning-light-checkbox" id="${light.id}" name="warningLights" value="${light.name}">
            <div class="warning-light-image ${light.class}">
              <div class="warning-light-symbol">${light.symbol}</div>
            </div>
            <div class="warning-light-label">${light.name}</div>
          `;
          warningLightContainer.appendChild(lightItem);
          
          // Add click handler for the entire item
          lightItem.addEventListener('click', function(e) {
            if (e.target.type !== 'checkbox') {
              const checkbox = this.querySelector('input[type="checkbox"]');
              checkbox.checked = !checkbox.checked;
              updateWarningLightSelection(this, checkbox.checked);
              handleEngineSystemSelection(checkbox);
            }
          });
          
          // Add change handler for checkbox
          const checkbox = lightItem.querySelector('input[type="checkbox"]');
          checkbox.addEventListener('change', function() {
            updateWarningLightSelection(lightItem, this.checked);
            handleEngineSystemSelection(this);
          });
        });
      }
      
      // Function to handle engine system selection (only one can be selected)
      function handleEngineSystemSelection(checkbox) {
        if (checkbox.checked && (checkbox.id === 'engsys' || checkbox.id === 'engsys2')) {
          // If an engine system light is selected, uncheck the other one
          const otherEngineId = checkbox.id === 'engsys' ? 'engsys2' : 'engsys';
          const otherEngineCheckbox = document.getElementById(otherEngineId);
          
          if (otherEngineCheckbox && otherEngineCheckbox.checked) {
            otherEngineCheckbox.checked = false;
            updateWarningLightSelection(otherEngineCheckbox.closest('.warning-light-item'), false);
          }
        }
      }
      
      // Function to update warning light selection style
      function updateWarningLightSelection(item, isSelected) {
        if (isSelected) {
          item.classList.add('selected');
        } else {
          item.classList.remove('selected');
        }
      }
      
      // Function to update service examples
      function updateServiceExamples(serviceType) {
        if (serviceType && serviceExamplesData[serviceType]) {
          defaultExample.style.display = 'none';
          examplesList.innerHTML = '';
          
          serviceExamplesData[serviceType].forEach(example => {
            const li = document.createElement('li');
            li.textContent = example;
            examplesList.appendChild(li);
          });
        } else {
          defaultExample.style.display = 'block';
        }
      }
      
      // Function to reset all sections
      function resetAllSections() {
        vehicleModelSection.style.display = 'none';
        repairTypeSection.style.display = 'none';
        warningLightSection.style.display = 'none';
        serviceExamples.style.display = 'none';
        otherModelInput.style.display = 'none';
        
        // Reset warning lights
        document.querySelectorAll('input[name="warningLights"]').forEach(checkbox => {
          checkbox.checked = false;
          updateWarningLightSelection(checkbox.closest('.warning-light-item'), false);
        });
      }
      
      // Generate queue number - FIXED to use the same format as thankyou.html
      function generateQueueNumber() {
        // Generate a random 6-digit number (same as thankyou.html)
        const randomNumber = Math.floor(100000 + Math.random() * 900000);
        return `E${randomNumber}`;
      }
      
      // Form submission handler
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Reset previous errors
        document.querySelectorAll('.error-text').forEach(el => {
          el.style.display = 'none';
        });
        
        let isValid = true;
        
        // Vehicle No validation (Singapore format)
        const vehicleNo = vehicleNoInput.value;
        const vehicleNoPattern = /^[A-Z]{2,}\d{1,4}[A-Z]$/i;
        if (!vehicleNoPattern.test(vehicleNo)) {
          document.getElementById('vehicleError').style.display = 'block';
          isValid = false;
        }
        
        // Mileage validation
        const mileage = mileageInput.value;
        const mileagePattern = /^\d{1,7}$/;
        if (!mileagePattern.test(mileage)) {
          document.getElementById('mileageError').style.display = 'block';
          isValid = false;
        }
        
        // Contact No validation
        const contactNo = contactInput.value;
        const contactPattern = /^[689]\d{7}$/;
        if (!contactPattern.test(contactNo)) {
          document.getElementById('contactError').style.display = 'block';
          isValid = false;
        }
        
        // Service type validation
        if (!serviceType.value) {
          isValid = false;
        }
        
        // Customer name validation
        const customerName = customerNameInput.value;
        if (!customerName.trim()) {
          isValid = false;
        }
        
        // Company name validation
        const companyName = companyNameInput.value;
        if (!companyName.trim()) {
          isValid = false;
        }
        
        // If "Others" is selected for vehicle model, validate the input
        const selectedVehicleModel = document.querySelector('input[name="vehicleModel"]:checked');
        if (selectedVehicleModel && selectedVehicleModel.value === 'OTHERS' && !otherVehicleModel.value.trim()) {
          isValid = false;
          // Add visual indication for required field
          otherVehicleModel.style.borderColor = '#e74c3c';
        } else if (otherVehicleModel) {
          otherVehicleModel.style.borderColor = '#ddd';
        }
        
        // If form is valid, save data and redirect to thank you page
        if (isValid) {
          // Get all form data
          const formData = {
            customerName: customerNameInput.value,
            companyName: companyNameInput.value,
            serviceType: serviceType.value,
            bookingType: bookingTypeInput.value, // This captures "Booked"
            vehicleNo: vehicleNoInput.value,
            contactNo: contactInput.value,
            mileage: mileageInput.value,
            status: 'waiting'
          };
          
          // Get vehicle model data (if applicable)
          const vehicleModelRadio = document.querySelector('input[name="vehicleModel"]:checked');
          if (vehicleModelRadio) {
            if (vehicleModelRadio.value === 'OTHERS') {
              formData.vehicleModel = otherVehicleModel.value;
            } else {
              formData.vehicleModel = vehicleModelRadio.value;
            }
          }
          
          // Get repair type data (if applicable)
          const repairTypeRadio = document.querySelector('input[name="repairType"]:checked');
          if (repairTypeRadio) {
            formData.repairType = repairTypeRadio.value;
          }
          
          // Get warning lights data (if applicable)
          const selectedWarningLights = Array.from(document.querySelectorAll('input[name="warningLights"]:checked'))
            .map(checkbox => checkbox.value);
          if (selectedWarningLights.length > 0) {
            formData.warningLights = selectedWarningLights;
          }
          
          // Generate queue number - FIXED to use same format as thankyou.html
          const queueNumber = generateQueueNumber();
          formData.queueNumber = queueNumber;
          
          // Save form data to localStorage for dashboard
          localStorage.setItem('latestFormData', JSON.stringify(formData));
          
          // Save to queue data
          saveToQueueData(formData);
          
          // Show success message
          const message = document.getElementById('formMessage');
          message.textContent = 'Redirecting...';
          message.className = 'message success';
          message.style.display = 'block';
          
          // Redirect to thank you page with queue number
          setTimeout(() => {
            window.location.href = 'thankyou.html?queue=' + queueNumber;
          }, 3000);
        } else {
          const message = document.getElementById('formMessage');
          message.textContent = 'Please correct the errors above.';
          message.className = 'message error';
          message.style.display = 'block';
        }
      });
      
      // Save to queue data
      function saveToQueueData(formData) {
        try {
          // Get existing queue data or initialize
          const existingData = localStorage.getItem('goldbellQueue');
          let queueData = existingData ? JSON.parse(existingData) : {
            total: 0,
            current: 0,
            submissions: []
          };
          
          // Add new submission
          queueData.submissions.push(formData);
          queueData.total = queueData.submissions.length;
          
          // Save back to localStorage
          localStorage.setItem('goldbellQueue', JSON.stringify(queueData));
          
          console.log('Queue data saved:', formData);
          
        } catch (error) {
          console.error('Error saving queue data:', error);
        }
      }
      
      // Reset button handler
      document.getElementById('resetBtn').addEventListener('click', function() {
        document.querySelectorAll('.error-text').forEach(el => {
          el.style.display = 'none';
        });
        
        const message = document.getElementById('formMessage');
        message.style.display = 'none';
        
        resetAllSections();
        defaultExample.style.display = 'block';
        
        // Reset border color for other vehicle model input
        if (otherVehicleModel) {
          otherVehicleModel.style.borderColor = '#ddd';
        }
      });
    });
  </script>
</body>
</html>